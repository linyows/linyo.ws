box: node
build:
  steps:
    - add-to-known_hosts:
      hostname: github.com
    - script:
      name: prepare deploy
      code: |
        npm install -g vue-cli
        npm install
        npm run generate
        npm run deploy
  after-steps:
    - linyows/slack_notification:
        token: $SLACK_TOKEN
        channel: C02FCHEQH
deploy:
  steps:
    - s3sync:
        key-id: $S3_KEY
        key-secret: $S3_SECRET
        bucket-url: $S3_BUCKET
        source-dir: $S3_SOURCE
        opts: '--acl-public'
  after-steps:
    - linyows/slack_notification:
        token: $SLACK_TOKEN
        channel: C02FCHEQH
